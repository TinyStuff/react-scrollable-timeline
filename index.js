"use strict";function e(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("react"));const r=(e,t)=>e.start.getTime()-t.start.getTime(),i=(e,{startTime:t,ratio:r})=>{const i=e.start.getTime()-t,a=e.end.getTime()-t,s=Math.round(i*r);return{width:Math.round(a*r)-s,left:s}},{useRef:a,useEffect:s}=t,{format:n,isToday:l,isPast:o,addDays:c,startOfDay:d}=require("date-fns"),m=({evt:e})=>t.createElement("div",{key:e.id,className:"react-scrollable-timeline-event"},e.title?e.title:e.id),u=({group:e,maxHeight:r,resourceNode:i})=>t.createElement("div",{style:{position:"relative",height:r+36}},t.createElement("div",{className:"resource-header",style:{height:r+36}},i({group:e}))),h=({childs:e,maxHeight:r,viewSize:{width:i}})=>t.createElement("div",{className:"timeline-separator",style:{height:r+36,overflow:"hidden",width:i}},e),p=({group:{title:e}})=>t.createElement("div",null,e),g=e=>t.createElement("div",null,n(e.start,"yyyy-MM-dd")),f=(e,t)=>e&&t&&e&&t[e]?t[e]:{title:e||""},v=({dates:e,lineItem:r,viewSize:i})=>t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.map((e=>r({date:e,viewSize:i})))),y=({date:e,viewSize:r})=>{const{width:a,left:s}=i(e,r);return t.createElement("div",{key:`line-${e.start.getTime()}`,style:{width:`${a}px`,display:"inline-flex",position:"absolute",left:`${s}px`,height:"100%",borderLeft:"1px solid #DDD",top:0}})};exports.Timeline=({groups:e,events:n,startDate:w=d(new Date),endDate:x=c(d(new Date),40),width:b=5e3,interval:E=864e5,resourceHeaderWidth:D=200,groupKey:k,getGroupData:T=f,resourceNode:O=p,itemNode:j=m,dateNode:N=g,onEventClick:H=(e=>e)})=>{const $=w.getTime(),M=x.getTime()-$,z={startDate:w,startTime:$,endDate:x,totalTicks:M,ratio:b/M,width:b},S=a(null),P=a(null),_=e=>i(e,z),C=(G=e=>k?e[k]:"single",n.reduce(((e,t)=>{const r=G(t);return Object.assign(Object.assign({},e),{[r]:[...e[r]||[],t]})}),{}));var G;const W=(({start:e,end:t,interval:r})=>{const i=[],a=e.getTime(),s=t.getTime(),n=Math.ceil((s-a)/r);for(let e=0;e<n;e++)i.push({start:new Date(a+r*e),end:new Date(a+r*(e+1))});return i})({start:w,end:x,interval:E}),q=W.map((e=>((e,r,i)=>{const{width:a,left:s}=i(r);let n="is-future";switch(!0){default:n="is-future";break;case l(r.start):n="is-today";break;case o(r.start):n="is-past"}return t.createElement("div",{key:`datenode-${r.start.getTime()}`,style:{width:`${a}px`,position:"absolute",left:`${s}px`,top:0},className:"react-scrollable-timeline-date "+n},e(r))})(N,e,_))),F=((e,t)=>{const r=[];return Object.keys(e).map((i=>{r.push(Object.assign(Object.assign({},t(e[i],i)),{key:i}))})),r})(C,(e=>e.sort(r).reduce(((e,r,i)=>({rendered:a=[],maxHeight:s=0,elements:n=[]},l)=>{const o=((e,t)=>t.filter((t=>t.id!=e.id)).filter((t=>{return i=e,!((r=t).end<=i.start||r.start>=i.end);var r,i})))(l,a);let c=o.length;for(let e=0;e<a.length+1;e++)if(!o.some((t=>t.positionFromTop==e))){c=e;break}const d=36*c;return{elements:[...n,t.createElement("div",{key:l.id,className:"timeline-event-wrapper "+(i?"pointer":""),style:Object.assign(Object.assign({},r(l)),{height:36,top:d}),onClick:()=>i(l)},t.createElement(e,{evt:l}))],maxHeight:Math.max(s||0,d),rendered:[...a,Object.assign(Object.assign({},l),{positionFromTop:c})]}})(j,_,H),{}))),I=F.map((({maxHeight:r,key:i})=>t.createElement(u,{key:`resource-${i}`,group:T(i,e),resourceNode:O,maxHeight:r}))),K=F.map((({elements:e,maxHeight:r,key:i})=>t.createElement(h,{key:`group-${i}`,maxHeight:r,childs:e,viewSize:z})));return s((()=>{if(S&&S.current){const e=S.current.children[0].clientHeight;S.current.style.height=`${e}px`,P&&P.current&&(P.current.style.marginTop=e-1+"px")}}),[]),t.createElement("div",{className:"react-scrollable-timeline",style:{maxWidth:"100%",position:"relative",display:"flex",flexDirection:"row",border:"1px solid #DDD"}},k&&t.createElement("div",{ref:P,style:{width:`${D}px`,position:"relative",flexGrow:0,flexShrink:0}},I),t.createElement("div",{style:{overflowX:"scroll",maxWidth:"100%",position:"relative",flexGrow:1}},t.createElement(v,{dates:W,lineItem:y,viewSize:z}),t.createElement("div",{ref:S,style:{width:z.width,position:"relative",height:"5rem"}},q),K))};
